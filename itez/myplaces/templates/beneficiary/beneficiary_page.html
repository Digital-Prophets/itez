{% load leaflet_tags %}
{% load static %}
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  <title>
      Itez Dashboard - {% block title %}{% endblock %} 
  </title>
  
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="title" content="Dashboard">
  <meta name="author" content="Digital Prophets">
  <link rel="stylesheet" href="/static/assets/css/vertical-layout-light/style.css">
  <link type="text/css" href="/static/assets/css/volt.css" rel="stylesheet">
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  
  
    {% leaflet_js %}
    {% leaflet_css %}
    <script src="{% static 'assets/js/htmx.js'%}"></script>
    
    <style>
      .leaflet-container { width: 100%; height: 800px; }
    </style>
  

  </head>

<body>

  
  {% include 'includes/navigation_beneficiary.html' %}

  

   
  
<!-- new list -->
      
     
       <div class="row">
        <div class="col-md-7" style="height: 800px;">
          {% leaflet_map "main" %}
         </div>
       <div class="col-md-5">
      <!-- test -->
      <div>
      <div class="card" style="height: 800px;">
        
        <div class="card-body">
          <div class="d-sm-flex justify-content-between align-items-start">
            <div>
              <h4>Hopital</h4>
              
                
            </div>

       
          </div>

          
          <div class=" table" >
            <form name="beneficiary_form" class="form-delete">{% csrf_token %}

              <!-- Added dynamic element facility -->
              <div class="mt-3" id="facility">       
                <table class="table select-table" id="table_id">
                 
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Description</th>
                      <th>District</th>
                      <th>Province</th>
                      <th>Country</th>
                    </tr>
                  </thead>
                  <tbody>

                 
                    {%for place in places %}
              <tr>
                
                <td><a href="{% url 'facility_detail' place.pk %}">{{place.name}}</a></td>
                <td>{{place.description}}</td>
                <td>{{place.District}}</td>
                <td>{{place.province}}</td>
                <td>{{place.Country}}</td>
              </tr>
              {% endfor %}
            </div>
            
                  </tbody>
                </table>
              </div>
            </form>
          </div>

        </div>
      </div>
      <!-- end test -->
       
     </div>

</div>



  
  
    <!-- Specific Page JS goes HERE  -->
   
<script src="/static/assets/js/dashboard.js"></script>
<script src="/static/assets/js/chart.roundedBarCharts.js"></script>
<script src="/static/assets/js/modal.js"></script>
<script src="/static/assets/js/download_itez_app_data.js"></script>
<script>
  $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
  });
</script>
<script src="/static/assets/vendors/js/vendor.bundle.base.js"></script>
  
    <!-- Specific JS Plugins goes HERE  -->
    
    
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="/static/assets/js/jquery.notifyBar.js"></script>

   
    <script>
      function myFunction() {
        document.getElementById("demo").innerHTML = "Hello World";
      }


      var dataurl = '{% url "my_places" %}';
      const baseUrl = location.origin

      window.addEventListener("map:init", function (event) {
        
        var map = event.detail.map;
        // Download GeoJSON data with Ajax
        fetch(dataurl)
          .then(function(resp) {
            return resp.json();
          })
          .then(function(data) {
            L.geoJson(data, {
              onEachFeature: function onEachFeature(feature, layer) {
                var props = feature.properties;
                var content = `<h4>Name:${props.name}</a></h4><p>Description: ${props.description}</p><p>District: ${props.District}</p><p>Province: ${props.province}</p><p>Country: ${props.Country}</p>`;
                layer.bindPopup(content);
            }}).addTo(map);
          });
      });
    </script>
  

  </body>
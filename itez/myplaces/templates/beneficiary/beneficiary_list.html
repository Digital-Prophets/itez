{% load static %}
<!DOCTYPE html>
<html lang="en">

<head> 
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<title>
    Itez Dashboard - {% block title %}{% endblock %} 
</title>

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="title" content="Dashboard">
<meta name="author" content="Digital Prophets">
<link rel="stylesheet" href="/static/assets/css/vertical-layout-light/style.css">
<link type="text/css" href="/static/assets/css/volt.css" rel="stylesheet">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Specific CSS Plugins goes HERE  -->
{% block css_plugins %}{% endblock css_plugins %}



<link rel="stylesheet" href="/static/assets/css/jquery.notifyBar.css">

<!-- Specific Page JS goes HERE  -->    
{% block stylesheets %}{% endblock stylesheets %}
</head>
<body>

  
  {% include 'includes/navigation.html' %}
  {% include 'includes/sidebar.html' %}


  <div class="container mt-3">
    <h2>Beneficiary</h2>
            
    <table class="table select-table" id="table_id">
      <thead>
        <tr>
          <th>
            <div class="form-check form-check-flat">
              <label class="form-check-label">
                <input type="checkbox" class="form-check-input selectall" aria-checked="false"><i
                  class="input-helper"></i></label>
                 <script>
                  var actionButton = document.getElementById("beneficiary-select-button");
                  var formAction = document.getElementById("form-delete");
                  var selectText = document.getElementById("beneficiary-selector");
                  actionButton.addEventListener("click", function(){
                    var value = selectText.options[selectText.selectedIndex].value;
                    var text = selectText.options[selectText.selectedIndex].text;
                    if(text == "delete selected"){
                      var confirmAction = confirm("Are you sure you want to delete selected beneficiaries?");
                      if(confirmAction){
                        document.beneficiary_form.method = "post";
                        document.beneficiary_form.action = "";
                        actionButton.click
                      }else{
                        console.log("delete action for selected beneficiaries was canceled")
                      }
                    }
                  });
                   $('.selectall').click(function() {
                      if ($(this).is(':checked')) {
                          $('input:checkbox').prop('checked', true);
                      } else {
                          $('input:checkbox').prop('checked', false);
                      }
                  });
                 </script>
            </div>
          </th>
          <th>Username</th>
            <th>Beneficiary  ID</th>
            <th></th>
            <th>Full Name</th>
            <th>Gender & Sex</th>
            <th>Facility</th>
            <th>Registered Date</th>
            <th>Action</th>
        </tr>
      </thead>
      <tbody>

     
        
        
  {% for beneficiary in itez_app_beneficiary %}
  <tr>
    <td>
      <div class="form-check form-check-flat">
        <label class="form-check-label">
          <input name="beneficiary-ids" value="{{ beneficiary.beneficiary_ids }}" type="checkbox" class="form-check-input"><i
            class="input-helper"></i></label>
      </div>
    </td>
    <td> <a style="text-decoration: none;" href="{% url 'beneficiary_detail' beneficiary.pk %}">

      {{ beneficiary.user }}</a></td>
    <td>
      <a style="text-decoration: none;" href="{{ beneficiary.get_absolute_url }}">
        {{ beneficiary.beneficiary_ids }}</a>
    </td>
    <td style="width:8%; height:8%; " >
      {% if beneficiary.profile_photo %}
        <img  src="{{ beneficiary.profile_photo.url }}" >
        {% elif beneficiary.sex == "Male" %}
        <img src="/static/assets/images/faces/male.jpeg" style="width:80%; height:80%; margin-right:-25%" alt="">
        {% elif beneficiary.sex == "Female" %}
        <img src="/static/assets/images/faces/female.jpeg" style="width:80%; height:80%;" alt="">
        {%else%}
        <p>No image uploaded</p>
        {% endif %}
        
    </td>
    <td>
      
        <div >
          <a  href="{% url 'beneficiary_detail' beneficiary.pk %}">
            <h6>{{ beneficiary.first_name }} {{ beneficiary.last_name }}</h6>
           
          </a>
          <h2><a href="#">{{beneficiary_lists.beneficiary.first_name}}</a>
          </h2>

        </div>
    </td>
    <td >
      <h6>{{ beneficiary.sex }}</h6>
      <p>{{ beneficiary.gender }}</p>
    </td>
    <td>
    
    <h6 style="font-weight: normal;">{{beneficiary.registered_facility}}</h6>
    </td>
    <td>
      <h6 style="font-weight: normal;">{{ beneficiary.created }}</h6>
    </td>
    <td>
      <!-- <div class="badge bg-success btn-icon-text btn-lg">
        <a href="#"
          data-toggle="tooltip" title="Add Medical Record">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-file-text" viewBox="0 0 16 16">
            <path d="M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1H5z"/>
            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"/>
          </svg>
        </a>
      </div> -->
      <div class="badge bg-success btn-icon-text btn-lg">
        <a href="{% url 'medical_records_detail' beneficiary.pk %}"
          data-toggle="tooltip" title="View Medical Record">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-file-text" viewBox="0 0 16 16">
            <path d="M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1H5z"/>
            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"/>
          </svg>
        </a>
      </div>
      <!-- <div class="badge bg-danger">
        <a href="#" data-toggle="tooltip" title="Edit">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
            <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
          </svg>
        </a>
      </div> -->
    
      <!-- <div class="badge badge-opacity-danger">
        <a  data-toggle="tooltip" title="Delete">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-x" viewBox="0 0 16 16">
            <path d="M6.854 7.146a.5.5 0 1 0-.708.708L7.293 9l-1.147 1.146a.5.5 0 0 0 .708.708L8 9.707l1.146 1.147a.5.5 0 0 0 .708-.708L8.707 9l1.147-1.146a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146z"/>
            <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
          </svg>
          <script>
            try{
              if("{{ beneficiary.id }}" === "{{ beneficiary.id }}"){
                const deleteButton = document.getElementById("{{ beneficiary.id }}");
                deleteButton.addEventListener("click", () => {
                  var response;
                  response = confirm("Are you sure you want to delete this beneficiary");
                  if(response){
                    const setProperty = deleteButton.href = "#";
                    setProperty.click()
                  }else if(!(response)){
                    console.log("cancelled post delete");
                  }
                });
              }
            }catch(error){
              console.log(error)
            }
        </script>
        
      </a>
    </div> -->
    </td>
  </tr>
  {% endfor %}

      </tbody>
    </table>
  </div>
  
  
    <!-- Specific Page JS goes HERE  -->
   
<script src="/static/assets/js/dashboard.js"></script>
<script src="/static/assets/js/chart.roundedBarCharts.js"></script>
<script src="/static/assets/js/modal.js"></script>
<script src="/static/assets/js/download_itez_app_data.js"></script>
<script>
  $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
  });
</script>
<script src="/static/assets/vendors/js/vendor.bundle.base.js"></script>
  
    <!-- Specific JS Plugins goes HERE  -->
    
    
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="/static/assets/js/jquery.notifyBar.js"></script>
    <script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
    <script src="{% static 'js/notifications.js' %}" type="text/javascript"></script>  
   

  
  </body>

{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %} 

<!-- Specific CSS Plugins goes HERE  -->
{% block css_plugins %}

  <link rel="stylesheet" href="/static/assets/js/select.dataTables.min.css">

{% endblock css_plugins %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

  <div class="content-wrapper">
    <div class="row">
      <div class="col-sm-12">
        <div class="home-tab">
          <div class="d-sm-flex align-items-center justify-content-between border-bottom">
            
          </div>
          <div class="tab-content tab-content-basic">
            <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview"> 
                <div class="row">
                    <div class="col-lg-12 d-flex flex-column">

                        <div class="row flex-grow">
                            <div class="col-md-6 col-lg-8 grid-margin stretch-card">
                                <div class="card card-rounded">
                                    <div class="card-body">
                                        <div class="row">
                                        <div class="col-lg-12">
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                            <div>
                                                <h4 class="card-title card-title-dash">Beneficiary Detail*</h4>
                                            </div>
                                            </div>
                                            <div class="mt-3">
                                            {% if request.user %}
                                                {% if beneficiaries %}
                                                    {%for user in beneficiaries %}
                                                        <div style="background: rgba(20,20,22,0.04);">
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.education_level}}</p>
                                                                    <small class="text-muted mb-0">Education Level</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.agent.first_name}} {{user.agent.last_name}}</p>
                                                                    <small class="text-muted mb-0">Agent</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.email}}</p>
                                                                    <small class="text-muted mb-0">Email</small>
                                                                </div>
                                                                </div>
                                                            </div> 
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.date_of_birth}}</p>
                                                                    <small class="text-muted mb-0">Birth Date</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.sex}}</p>
                                                                    <small class="text-muted mb-0">Sex</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.gender}}</p>
                                                                    <small class="text-muted mb-0">Gender</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.name_of_spouse}}</p>
                                                                    <small class="text-muted mb-0">Name of spouse</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.number_of_children}}</p>
                                                                    <small class="text-muted mb-0">Number of children</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.number_of_siblings}}</p>
                                                                    <small class="text-muted mb-0">Number Of siblings</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.first_name}} {{user.last_name}}</p>
                                                                    <small class="text-muted mb-0">Service Provider</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.marital_status}}</p>
                                                                    <small class="text-muted mb-0">Marital Status</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{user.created}}</p>
                                                                    <small class="text-muted mb-0 mt-3">Date</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <hr />
                                                    {% endfor %}
                                                {% else %}
                                                    <p>No Details available yet</p>
                                                {% endif %}
                                            {% else %}
                                            {% endif %}

                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <div>
                                                    <h4 class="card-title card-title-dash mt-3">Prescription*</h4>
                                                </div>
                                            </div>
                                            {% if request.user %}
                                                {% if prescriptions %}
                                                    {% for data in prescriptions %}
                                                        <div style="background: rgba(20,20,22,0.04);">
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{data.title}}</p>
                                                                    <small class="text-muted mb-0">Title</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{data.service_provider.first_name}} {{data.service_provider.last_name}}</p>
                                                                    <small class="text-muted mb-0">Service Provider</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{data.facility}}</p>
                                                                    <small class="text-muted mb-0">Facility</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                                <div class="d-flex">
                                                                <div class="wrapper ms-3">
                                                                    <p class="ms-1 mb-1 fw-bold">{{data.date}}</p>
                                                                    <small class="text-muted mb-0 mt-3">Date</small>
                                                                </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <hr />
                                                    {% endfor %}
                                                {% else %}
                                                    <p>No Prescriptions available yet</p>
                                                {% endif %}
                                            {% else %}
                                            {% endif %}

                                            <div>
                                                <h4 class="card-title card-title-dash mt-3">Labs*</h4>
                                            </div>
                                            {% if request.user %}
                                                {% if drugs %}
                                                {% for drug in drugs %}
                                                    <div style="background: rgba(20,20,22,0.04);">
                                                        <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                            <div class="d-flex">
                                                            <div class="wrapper ms-3">
                                                                <p class="ms-1 mb-1 fw-bold">{{drug.beneficiary}}</p>
                                                                <small class="text-muted mb-0">Beneficiary</small>
                                                            </div>
                                                            </div>
                                                        </div>
                                                        <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                            <div class="d-flex">
                                                            <div class="wrapper ms-3">
                                                                <p class="ms-1 mb-1 fw-bold">{{drug.name}}</p>
                                                                <small class="text-muted mb-0">Drug Name</small>
                                                            </div>
                                                            </div>
                                                        </div> 
                                                        <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                            <div class="d-flex">
                                                            <div class="wrapper ms-3">
                                                                <p class="ms-1 mb-1 fw-bold">{{drug.manufacturer}}</p>
                                                                <small class="text-muted mb-0">Manufacturer</small>
                                                            </div>
                                                            </div>
                                                        </div>
                                                        <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                            <div class="d-flex">
                                                            <div class="wrapper ms-3">
                                                                <p class="ms-1 mb-1 fw-bold">{{drug.expiry_date}}</p>
                                                                <small class="text-muted mb-0">Expiry Date</small>
                                                            </div>
                                                            </div>
                                                        </div>
                                                        <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                            <div class="d-flex">
                                                            <div class="wrapper ms-3">
                                                                <p class="ms-1 mb-1 fw-bold">{{drug.created}}</p>
                                                                <small class="text-muted mb-0 mt-3">Created Date</small>
                                                            </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <hr />
                                                {% endfor %}
                                                {% else %}
                                                    <p>No Labs available yet</p>
                                                {% endif %}
                                            {% else %}
                                            {% endif %}
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-4 grid-margin">
                                <div class="row">
                                    <div class="card card-rounded">
                                        <div class="card-body">
                                        <div class="d-flex align-items-center justify-content-between mb-3">
                                            <h4 class="card-title card-title-dash">Profile Photo</h4>
                                        </div>
                                        {% if request.user.profile.profile_photo.url %}
                                            <img width="100" height="100" style="margin-right: 1em;" class="img-md rounded-circle" src="{{request.user.profile.profile_photo.url}}" alt="Profile image">
                                        {% elif not request.user.profile_photo.url and request.user.gender == 'Male' %}
                                            <img class="img-xs rounded-circle" src="/static/assets/images/faces/male.jpeg" alt="Profile image">
                                        {% elif not request.user.profile_photo.url and request.user.gender == 'Female' %}
                                            <img class="img-xs rounded-circle" src="/static/assets/images/faces/female.jpeg" alt="Profile image">
                                        {% else %}
                                            <img class="img-xs rounded-circle" src="/static/assets/images/faces/male.jpeg" alt="Profile image">
                                        {% endif %} 
                                    </div>
                                </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="card card-rounded">
                                        <div class="card-body">
                                        <div class="d-flex align-items-center justify-content-between mb-3">
                                            <h4 class="card-title card-title-dash">User Profile Details</h4>
                                        </div>
                                        
                                        <div class="list align-items-center pt-3">
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.user.first_name|title}}</p>
                                                    <small class="text-muted mb-0">First Name</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.user.last_name|title}}</p>
                                                    <small class="text-muted mb-0">Last Name</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.birth_date}}</p>
                                                    <small class="text-muted mb-0">Birth Date</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.user}}</p>
                                                    <small class="text-muted mb-0">Username</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.address}}</p>
                                                    <small class="text-muted mb-0">Address</small>
                                                </div>
                                                </div>
                                            </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.phone_number}}</p>
                                                    <small class="text-muted mb-0">Phone Number</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.phone_number_2}}</p>
                                                    <small class="text-muted mb-0">Other Phone Number</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.gender}}</p>
                                                    <small class="text-muted mb-0">Gender</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.postal_code}}</p>
                                                    <small class="text-muted mb-0">Postal Code</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper d-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <p class="ms-1 mb-1 fw-bold">{{user.sex}}</p>
                                                    <small class="text-muted mb-0">Sex</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapperd-flex align-items-center justify-content-between py-2 border-bottom">
                                                <div class="d-flex">
                                                <div class="wrapper ms-3">
                                                    <small class="text-muted mb-0">More*</small>
                                                </div>
                                                </div>
                                            </div>
                                            <div class="wrapper w-100 mt-2">
                                            <p class="mb-0">
                                                <a href="user/profile/update/" class="btn btn-primary">Edit Data</i></a>
                                            </p>
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    
                            {% comment %} <div class="col-md-6 col-lg-4 grid-margin grid-stretch"> 
                                
                            </div> {% endcomment %}
                    </div>
                </div>
        </div>
      </div>
    </div>
  </div>

{% endblock content %}

<!-- Specific JS Plugins goes HERE  -->
{% block js_plugins %}

  <script src="/static/assets/vendors/chart.js/Chart.min.js"></script>
  <script src="/static/assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
  <script src="/static/assets/vendors/progressbar.js/progressbar.min.js"></script>

{% endblock js_plugins %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

  <script src="/static/assets/js/dashboard.js"></script>
  <script src="/static/assets/js/Chart.roundedBarCharts.js"></script>

{% endblock javascripts %}
